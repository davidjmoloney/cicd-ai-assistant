{
  "_debug_metadata": {
    "timestamp": "20260216_103508",
    "tool_id": "mypy",
    "signal_type": "type_check",
    "num_signals": 4,
    "signal_files": [
      "prospecting/enrichment_types.py"
    ],
    "system_prompt_length": 10660,
    "user_prompt_length": 12656
  },
  "context": {
    "group": {
      "tool_id": "mypy",
      "signal_type": "type_check",
      "group_size": 4
    },
    "signals": [
      {
        "signal": {
          "tool_id": "mypy",
          "signal_type": "type_check",
          "severity": "high",
          "rule_code": "arg-type",
          "message": "Argument \"merge_strategy\" to \"FieldDefinition\" has incompatible type \"Literal['prefer_perplexity']\"; expected \"Literal['prefer_website', 'prefer_external', 'merge', 'concat', 'deduplicate']\"",
          "docs_url": "https://mypy.readthedocs.io/en/stable/error_code_list.html#arg-type",
          "file_path": "prospecting/enrichment_types.py",
          "span": {
            "start": {
              "row": 290,
              "column": 24
            },
            "end": {
              "row": 290,
              "column": 24
            }
          }
        },
        "file_read_error": null,
        "code_context": {
          "window": {
            "file_path": "prospecting/enrichment_types.py",
            "start_row": 260,
            "end_row": 320,
            "text": "        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"structured\"\n    ),\n    \"investment_strategy_mandate.co_investment_activity\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.co_investment_activity\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"investment_strategy_mandate.history_investing_similar_funds\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.history_investing_similar_funds\",\n        field_type=FieldType.ARRAY_OBJECT,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"structured\"\n    ),\n    \"investment_strategy_mandate.public_RFPs_allocation_shifts\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.public_RFPs_allocation_shifts\",\n        field_type=FieldType.ARRAY_OBJECT,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"structured\"\n    ),\n    \n    # ==================== Investment Strategy & Mandate (AUM) ====================\n    \"investment_strategy_mandate.aum\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.aum\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"investment_strategy_mandate.breakdown_by_asset_class\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.breakdown_by_asset_class\",\n        field_type=FieldType.ARRAY_OBJECT,  # Prompt returns array of objects\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"structured\"\n    ),\n    \"investment_strategy_mandate.growth_decline_trajectory\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.growth_decline_trajectory\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"investment_strategy_mandate.esg_dei_strategy\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.esg_dei_strategy\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \n    # ==================== Organization Decision Making ====================\n    \"organization_decision_making.key_decision_makers\": FieldDefinition(\n        field_path=\"organization_decision_making.key_decision_makers\",\n        field_type=FieldType.PYDANTIC_MODEL,\n        pydantic_model=KeyDecisionMakers,\n        needs_llm=False,  # Already processed by resolver's LLM - skip consolidation to preserve linkedin_url\n"
          },
          "imports": {
            "file_path": "prospecting/enrichment_types.py",
            "start_row": 1,
            "end_row": 18,
            "text": "\"\"\"\nType system for enrichment fields.\n\nDefines FieldDefinitions that specify:\n- Field data types\n- Merge strategies\n- LLM processing requirements\n- Output formats\n- References to Pydantic models where applicable\n\"\"\"\n\nfrom enum import Enum\nfrom dataclasses import dataclass\nfrom typing import Optional, Dict, List, Type, Literal, Any\nfrom pydantic import BaseModel\n\n# Import Pydantic models\nfrom prospecting.enrichment_models import (\n"
          },
          "enclosing_function": null,
          "try_except_block": null,
          "class_definition": null,
          "type_aliases": {
            "file_path": "prospecting/enrichment_types.py",
            "start_row": 540,
            "end_row": 540,
            "text": "def get_field_definition(field_path: str) -> Optional[FieldDefinition]:\n"
          },
          "related_function": null,
          "module_constants": null
        },
        "edit_snippet": {
          "file_path": "prospecting/enrichment_types.py",
          "start_row": 283,
          "end_row": 297,
          "text": "),\n    \n# ==================== Investment Strategy & Mandate (AUM) ====================\n\"investment_strategy_mandate.aum\": FieldDefinition(\n    field_path=\"investment_strategy_mandate.aum\",\n    field_type=FieldType.STRING,\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"value_with_citations\"\n),\n\"investment_strategy_mandate.breakdown_by_asset_class\": FieldDefinition(\n    field_path=\"investment_strategy_mandate.breakdown_by_asset_class\",\n    field_type=FieldType.ARRAY_OBJECT,  # Prompt returns array of objects\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n",
          "original_text": "    ),\n    \n    # ==================== Investment Strategy & Mandate (AUM) ====================\n    \"investment_strategy_mandate.aum\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.aum\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"investment_strategy_mandate.breakdown_by_asset_class\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.breakdown_by_asset_class\",\n        field_type=FieldType.ARRAY_OBJECT,  # Prompt returns array of objects\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n",
          "error_line": 290,
          "error_line_in_snippet": 8,
          "snippet_length": 15,
          "base_indent": "    "
        },
        "edit_window_type": "lines",
        "fix_context": {
          "exists": false
        }
      },
      {
        "signal": {
          "tool_id": "mypy",
          "signal_type": "type_check",
          "severity": "high",
          "rule_code": "arg-type",
          "message": "Argument \"merge_strategy\" to \"FieldDefinition\" has incompatible type \"Literal['prefer_perplexity']\"; expected \"Literal['prefer_website', 'prefer_external', 'merge', 'concat', 'deduplicate']\"",
          "docs_url": "https://mypy.readthedocs.io/en/stable/error_code_list.html#arg-type",
          "file_path": "prospecting/enrichment_types.py",
          "span": {
            "start": {
              "row": 304,
              "column": 24
            },
            "end": {
              "row": 304,
              "column": 24
            }
          }
        },
        "file_read_error": null,
        "code_context": {
          "window": {
            "file_path": "prospecting/enrichment_types.py",
            "start_row": 274,
            "end_row": 334,
            "text": "        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"structured\"\n    ),\n    \"investment_strategy_mandate.public_RFPs_allocation_shifts\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.public_RFPs_allocation_shifts\",\n        field_type=FieldType.ARRAY_OBJECT,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"structured\"\n    ),\n    \n    # ==================== Investment Strategy & Mandate (AUM) ====================\n    \"investment_strategy_mandate.aum\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.aum\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"investment_strategy_mandate.breakdown_by_asset_class\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.breakdown_by_asset_class\",\n        field_type=FieldType.ARRAY_OBJECT,  # Prompt returns array of objects\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"structured\"\n    ),\n    \"investment_strategy_mandate.growth_decline_trajectory\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.growth_decline_trajectory\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"investment_strategy_mandate.esg_dei_strategy\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.esg_dei_strategy\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \n    # ==================== Organization Decision Making ====================\n    \"organization_decision_making.key_decision_makers\": FieldDefinition(\n        field_path=\"organization_decision_making.key_decision_makers\",\n        field_type=FieldType.PYDANTIC_MODEL,\n        pydantic_model=KeyDecisionMakers,\n        needs_llm=False,  # Already processed by resolver's LLM - skip consolidation to preserve linkedin_url\n        merge_strategy=\"merge\",\n        output_format=\"pydantic_model\"\n    ),\n    \"organization_decision_making.firm_ownership_type\": FieldDefinition(\n        field_path=\"organization_decision_making.firm_ownership_type\",\n        field_type=FieldType.PYDANTIC_MODEL,\n        pydantic_model=FirmOwnershipType,\n        needs_llm=True,\n        merge_strategy=\"merge\",\n        output_format=\"pydantic_model\"\n    ),\n    \"organization_decision_making.recent_leadership_changes\": FieldDefinition(\n        field_path=\"organization_decision_making.recent_leadership_changes\",\n        field_type=FieldType.PYDANTIC_MODEL,\n"
          },
          "imports": {
            "file_path": "prospecting/enrichment_types.py",
            "start_row": 1,
            "end_row": 18,
            "text": "\"\"\"\nType system for enrichment fields.\n\nDefines FieldDefinitions that specify:\n- Field data types\n- Merge strategies\n- LLM processing requirements\n- Output formats\n- References to Pydantic models where applicable\n\"\"\"\n\nfrom enum import Enum\nfrom dataclasses import dataclass\nfrom typing import Optional, Dict, List, Type, Literal, Any\nfrom pydantic import BaseModel\n\n# Import Pydantic models\nfrom prospecting.enrichment_models import (\n"
          },
          "enclosing_function": null,
          "try_except_block": null,
          "class_definition": null,
          "type_aliases": {
            "file_path": "prospecting/enrichment_types.py",
            "start_row": 540,
            "end_row": 540,
            "text": "def get_field_definition(field_path: str) -> Optional[FieldDefinition]:\n"
          },
          "related_function": null,
          "module_constants": null
        },
        "edit_snippet": {
          "file_path": "prospecting/enrichment_types.py",
          "start_row": 297,
          "end_row": 311,
          "text": "    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"structured\"\n),\n\"investment_strategy_mandate.growth_decline_trajectory\": FieldDefinition(\n    field_path=\"investment_strategy_mandate.growth_decline_trajectory\",\n    field_type=FieldType.STRING,\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"value_with_citations\"\n),\n\"investment_strategy_mandate.esg_dei_strategy\": FieldDefinition(\n    field_path=\"investment_strategy_mandate.esg_dei_strategy\",\n    field_type=FieldType.STRING,\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n",
          "original_text": "        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"structured\"\n    ),\n    \"investment_strategy_mandate.growth_decline_trajectory\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.growth_decline_trajectory\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"investment_strategy_mandate.esg_dei_strategy\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.esg_dei_strategy\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n",
          "error_line": 304,
          "error_line_in_snippet": 8,
          "snippet_length": 15,
          "base_indent": "    "
        },
        "edit_window_type": "lines",
        "fix_context": {
          "exists": false
        }
      },
      {
        "signal": {
          "tool_id": "mypy",
          "signal_type": "type_check",
          "severity": "high",
          "rule_code": "arg-type",
          "message": "Argument \"merge_strategy\" to \"FieldDefinition\" has incompatible type \"Literal['prefer_coresignal']\"; expected \"Literal['prefer_website', 'prefer_external', 'merge', 'concat', 'deduplicate']\"",
          "docs_url": "https://mypy.readthedocs.io/en/stable/error_code_list.html#arg-type",
          "file_path": "prospecting/enrichment_types.py",
          "span": {
            "start": {
              "row": 344,
              "column": 24
            },
            "end": {
              "row": 344,
              "column": 24
            }
          }
        },
        "file_read_error": null,
        "code_context": {
          "window": {
            "file_path": "prospecting/enrichment_types.py",
            "start_row": 314,
            "end_row": 374,
            "text": "    \n    # ==================== Organization Decision Making ====================\n    \"organization_decision_making.key_decision_makers\": FieldDefinition(\n        field_path=\"organization_decision_making.key_decision_makers\",\n        field_type=FieldType.PYDANTIC_MODEL,\n        pydantic_model=KeyDecisionMakers,\n        needs_llm=False,  # Already processed by resolver's LLM - skip consolidation to preserve linkedin_url\n        merge_strategy=\"merge\",\n        output_format=\"pydantic_model\"\n    ),\n    \"organization_decision_making.firm_ownership_type\": FieldDefinition(\n        field_path=\"organization_decision_making.firm_ownership_type\",\n        field_type=FieldType.PYDANTIC_MODEL,\n        pydantic_model=FirmOwnershipType,\n        needs_llm=True,\n        merge_strategy=\"merge\",\n        output_format=\"pydantic_model\"\n    ),\n    \"organization_decision_making.recent_leadership_changes\": FieldDefinition(\n        field_path=\"organization_decision_making.recent_leadership_changes\",\n        field_type=FieldType.PYDANTIC_MODEL,\n        pydantic_model=RecentLeadershipChanges,\n        needs_llm=True,\n        merge_strategy=\"merge\",\n        output_format=\"pydantic_model\"\n    ),\n    \"organization_decision_making.parent_company\": FieldDefinition(\n        field_path=\"organization_decision_making.parent_company\",\n        field_type=FieldType.OBJECT,\n        needs_llm=False,  # CoreSignal-only field\n        merge_strategy=\"prefer_coresignal\",  # CoreSignal-only field\n        output_format=\"structured\"\n    ),\n    \n    # ==================== Firm Information (Distribution Coverage) ====================\n    \"firm_information.target_investor_type\": FieldDefinition(\n        field_path=\"firm_information.target_investor_type\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"firm_information.regulated_by\": FieldDefinition(\n        field_path=\"firm_information.regulated_by\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"firm_information.litigation_regulatory_risk\": FieldDefinition(\n        field_path=\"firm_information.litigation_regulatory_risk\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \n    # ==================== Activity Sentiment Signals ====================\n    \"news_activity_signals.recent_hires\": FieldDefinition(\n        field_path=\"news_activity_signals.recent_hires\",\n        field_type=FieldType.PYDANTIC_MODEL,\n"
          },
          "imports": {
            "file_path": "prospecting/enrichment_types.py",
            "start_row": 1,
            "end_row": 18,
            "text": "\"\"\"\nType system for enrichment fields.\n\nDefines FieldDefinitions that specify:\n- Field data types\n- Merge strategies\n- LLM processing requirements\n- Output formats\n- References to Pydantic models where applicable\n\"\"\"\n\nfrom enum import Enum\nfrom dataclasses import dataclass\nfrom typing import Optional, Dict, List, Type, Literal, Any\nfrom pydantic import BaseModel\n\n# Import Pydantic models\nfrom prospecting.enrichment_models import (\n"
          },
          "enclosing_function": null,
          "try_except_block": null,
          "class_definition": null,
          "type_aliases": {
            "file_path": "prospecting/enrichment_types.py",
            "start_row": 540,
            "end_row": 540,
            "text": "def get_field_definition(field_path: str) -> Optional[FieldDefinition]:\n"
          },
          "related_function": null,
          "module_constants": null
        },
        "edit_snippet": {
          "file_path": "prospecting/enrichment_types.py",
          "start_row": 337,
          "end_row": 351,
          "text": "    merge_strategy=\"merge\",\n    output_format=\"pydantic_model\"\n),\n\"organization_decision_making.parent_company\": FieldDefinition(\n    field_path=\"organization_decision_making.parent_company\",\n    field_type=FieldType.OBJECT,\n    needs_llm=False,  # CoreSignal-only field\n    merge_strategy=\"prefer_coresignal\",  # CoreSignal-only field\n    output_format=\"structured\"\n),\n    \n# ==================== Firm Information (Distribution Coverage) ====================\n\"firm_information.target_investor_type\": FieldDefinition(\n    field_path=\"firm_information.target_investor_type\",\n    field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n",
          "original_text": "        merge_strategy=\"merge\",\n        output_format=\"pydantic_model\"\n    ),\n    \"organization_decision_making.parent_company\": FieldDefinition(\n        field_path=\"organization_decision_making.parent_company\",\n        field_type=FieldType.OBJECT,\n        needs_llm=False,  # CoreSignal-only field\n        merge_strategy=\"prefer_coresignal\",  # CoreSignal-only field\n        output_format=\"structured\"\n    ),\n    \n    # ==================== Firm Information (Distribution Coverage) ====================\n    \"firm_information.target_investor_type\": FieldDefinition(\n        field_path=\"firm_information.target_investor_type\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n",
          "error_line": 344,
          "error_line_in_snippet": 8,
          "snippet_length": 15,
          "base_indent": "    "
        },
        "edit_window_type": "lines",
        "fix_context": {
          "exists": false
        }
      },
      {
        "signal": {
          "tool_id": "mypy",
          "signal_type": "type_check",
          "severity": "high",
          "rule_code": "arg-type",
          "message": "Argument \"merge_strategy\" to \"FieldDefinition\" has incompatible type \"Literal['prefer_perplexity']\"; expected \"Literal['prefer_website', 'prefer_external', 'merge', 'concat', 'deduplicate']\"",
          "docs_url": "https://mypy.readthedocs.io/en/stable/error_code_list.html#arg-type",
          "file_path": "prospecting/enrichment_types.py",
          "span": {
            "start": {
              "row": 360,
              "column": 24
            },
            "end": {
              "row": 360,
              "column": 24
            }
          }
        },
        "file_read_error": null,
        "code_context": {
          "window": {
            "file_path": "prospecting/enrichment_types.py",
            "start_row": 330,
            "end_row": 390,
            "text": "        output_format=\"pydantic_model\"\n    ),\n    \"organization_decision_making.recent_leadership_changes\": FieldDefinition(\n        field_path=\"organization_decision_making.recent_leadership_changes\",\n        field_type=FieldType.PYDANTIC_MODEL,\n        pydantic_model=RecentLeadershipChanges,\n        needs_llm=True,\n        merge_strategy=\"merge\",\n        output_format=\"pydantic_model\"\n    ),\n    \"organization_decision_making.parent_company\": FieldDefinition(\n        field_path=\"organization_decision_making.parent_company\",\n        field_type=FieldType.OBJECT,\n        needs_llm=False,  # CoreSignal-only field\n        merge_strategy=\"prefer_coresignal\",  # CoreSignal-only field\n        output_format=\"structured\"\n    ),\n    \n    # ==================== Firm Information (Distribution Coverage) ====================\n    \"firm_information.target_investor_type\": FieldDefinition(\n        field_path=\"firm_information.target_investor_type\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"firm_information.regulated_by\": FieldDefinition(\n        field_path=\"firm_information.regulated_by\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"firm_information.litigation_regulatory_risk\": FieldDefinition(\n        field_path=\"firm_information.litigation_regulatory_risk\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \n    # ==================== Activity Sentiment Signals ====================\n    \"news_activity_signals.recent_hires\": FieldDefinition(\n        field_path=\"news_activity_signals.recent_hires\",\n        field_type=FieldType.PYDANTIC_MODEL,\n        pydantic_model=RecentHires,\n        needs_llm=True,\n        merge_strategy=\"merge\",\n        output_format=\"pydantic_model\"\n    ),\n    \"news_activity_signals.M&A_fund_spinouts\": FieldDefinition(\n        field_path=\"news_activity_signals.M&A_fund_spinouts\",\n        field_type=FieldType.PYDANTIC_MODEL,\n        pydantic_model=MAFundSpinouts,\n        needs_llm=True,\n        merge_strategy=\"merge\",\n        output_format=\"pydantic_model\"\n    ),\n    \"news_activity_signals.recent_news\": FieldDefinition(\n        field_path=\"news_activity_signals.recent_news\",\n        field_type=FieldType.PYDANTIC_MODEL,\n"
          },
          "imports": {
            "file_path": "prospecting/enrichment_types.py",
            "start_row": 1,
            "end_row": 18,
            "text": "\"\"\"\nType system for enrichment fields.\n\nDefines FieldDefinitions that specify:\n- Field data types\n- Merge strategies\n- LLM processing requirements\n- Output formats\n- References to Pydantic models where applicable\n\"\"\"\n\nfrom enum import Enum\nfrom dataclasses import dataclass\nfrom typing import Optional, Dict, List, Type, Literal, Any\nfrom pydantic import BaseModel\n\n# Import Pydantic models\nfrom prospecting.enrichment_models import (\n"
          },
          "enclosing_function": null,
          "try_except_block": null,
          "class_definition": null,
          "type_aliases": {
            "file_path": "prospecting/enrichment_types.py",
            "start_row": 540,
            "end_row": 540,
            "text": "def get_field_definition(field_path: str) -> Optional[FieldDefinition]:\n"
          },
          "related_function": null,
          "module_constants": null
        },
        "edit_snippet": {
          "file_path": "prospecting/enrichment_types.py",
          "start_row": 353,
          "end_row": 367,
          "text": "    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"value_with_citations\"\n),\n\"firm_information.regulated_by\": FieldDefinition(\n    field_path=\"firm_information.regulated_by\",\n    field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"value_with_citations\"\n),\n\"firm_information.litigation_regulatory_risk\": FieldDefinition(\n    field_path=\"firm_information.litigation_regulatory_risk\",\n    field_type=FieldType.STRING,  # Frontend expects string, not array\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n",
          "original_text": "        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"firm_information.regulated_by\": FieldDefinition(\n        field_path=\"firm_information.regulated_by\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"firm_information.litigation_regulatory_risk\": FieldDefinition(\n        field_path=\"firm_information.litigation_regulatory_risk\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n",
          "error_line": 360,
          "error_line_in_snippet": 8,
          "snippet_length": 15,
          "base_indent": "    "
        },
        "edit_window_type": "lines",
        "fix_context": {
          "exists": false
        }
      }
    ],
    "merged_snippet_groups": [
      {
        "signal_indices": [
          0,
          1
        ],
        "edit_snippet": {
          "file_path": "prospecting/enrichment_types.py",
          "start_row": 283,
          "end_row": 311,
          "text": "),\n    \n# ==================== Investment Strategy & Mandate (AUM) ====================\n\"investment_strategy_mandate.aum\": FieldDefinition(\n    field_path=\"investment_strategy_mandate.aum\",\n    field_type=FieldType.STRING,\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"value_with_citations\"\n),\n\"investment_strategy_mandate.breakdown_by_asset_class\": FieldDefinition(\n    field_path=\"investment_strategy_mandate.breakdown_by_asset_class\",\n    field_type=FieldType.ARRAY_OBJECT,  # Prompt returns array of objects\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"structured\"\n),\n\"investment_strategy_mandate.growth_decline_trajectory\": FieldDefinition(\n    field_path=\"investment_strategy_mandate.growth_decline_trajectory\",\n    field_type=FieldType.STRING,\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"value_with_citations\"\n),\n\"investment_strategy_mandate.esg_dei_strategy\": FieldDefinition(\n    field_path=\"investment_strategy_mandate.esg_dei_strategy\",\n    field_type=FieldType.STRING,\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n",
          "original_text": "    ),\n    \n    # ==================== Investment Strategy & Mandate (AUM) ====================\n    \"investment_strategy_mandate.aum\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.aum\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"investment_strategy_mandate.breakdown_by_asset_class\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.breakdown_by_asset_class\",\n        field_type=FieldType.ARRAY_OBJECT,  # Prompt returns array of objects\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"structured\"\n    ),\n    \"investment_strategy_mandate.growth_decline_trajectory\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.growth_decline_trajectory\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"investment_strategy_mandate.esg_dei_strategy\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.esg_dei_strategy\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n",
          "error_line": 290,
          "error_line_in_snippet": 8,
          "snippet_length": 29,
          "base_indent": "    "
        }
      },
      {
        "signal_indices": [
          2,
          3
        ],
        "edit_snippet": {
          "file_path": "prospecting/enrichment_types.py",
          "start_row": 337,
          "end_row": 367,
          "text": "    merge_strategy=\"merge\",\n    output_format=\"pydantic_model\"\n),\n\"organization_decision_making.parent_company\": FieldDefinition(\n    field_path=\"organization_decision_making.parent_company\",\n    field_type=FieldType.OBJECT,\n    needs_llm=False,  # CoreSignal-only field\n    merge_strategy=\"prefer_coresignal\",  # CoreSignal-only field\n    output_format=\"structured\"\n),\n    \n# ==================== Firm Information (Distribution Coverage) ====================\n\"firm_information.target_investor_type\": FieldDefinition(\n    field_path=\"firm_information.target_investor_type\",\n    field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"value_with_citations\"\n),\n\"firm_information.regulated_by\": FieldDefinition(\n    field_path=\"firm_information.regulated_by\",\n    field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"value_with_citations\"\n),\n\"firm_information.litigation_regulatory_risk\": FieldDefinition(\n    field_path=\"firm_information.litigation_regulatory_risk\",\n    field_type=FieldType.STRING,  # Frontend expects string, not array\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n",
          "original_text": "        merge_strategy=\"merge\",\n        output_format=\"pydantic_model\"\n    ),\n    \"organization_decision_making.parent_company\": FieldDefinition(\n        field_path=\"organization_decision_making.parent_company\",\n        field_type=FieldType.OBJECT,\n        needs_llm=False,  # CoreSignal-only field\n        merge_strategy=\"prefer_coresignal\",  # CoreSignal-only field\n        output_format=\"structured\"\n    ),\n    \n    # ==================== Firm Information (Distribution Coverage) ====================\n    \"firm_information.target_investor_type\": FieldDefinition(\n        field_path=\"firm_information.target_investor_type\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"firm_information.regulated_by\": FieldDefinition(\n        field_path=\"firm_information.regulated_by\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"firm_information.litigation_regulatory_risk\": FieldDefinition(\n        field_path=\"firm_information.litigation_regulatory_risk\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n",
          "error_line": 344,
          "error_line_in_snippet": 8,
          "snippet_length": 31,
          "base_indent": "    "
        }
      }
    ],
    "standalone_signal_indices": []
  },
  "prompts": {
    "system_prompt": "You are an expert code repair agent. Your task is to make MINIMAL, SURGICAL fixes to code errors.\n\n## CRITICAL PRINCIPLE: MINIMAL CHANGES ONLY\n\nYour job is to fix ONLY the specific error mentioned. You are NOT improving, refactoring, or cleaning up code.\n\n**THE GOLDEN RULE**: Every line in your output that is NOT directly part of the fix MUST be IDENTICAL to the input - same content, same whitespace, same everything.\n\n## How This Works\n\nFor each error signal, you will receive:\n\n1. **Error Information**: Type, message, severity, and rule code\n2. **Edit Snippet**: A small code snippet (~13 lines) containing the error\n   - This is what you need to FIX and RETURN\n   - The error location within the snippet is indicated (e.g., \"Error on line 4 of 13\")\n3. **Context Window**: A larger code window (~30 lines) around the error for understanding\n   - Use this to understand the surrounding code, but DON'T return it\n\n4. **Tailored Context** (varies by signal type - optimized to reduce token usage):\n   - **Imports**: The file's import block (for type definitions, dependencies)\n     - Included for: type errors, undefined names, most issues\n     - Excluded for: import-only errors, bare except blocks\n   - **Enclosing Function**: The function containing the error (for understanding scope/logic)\n     - Included for: type errors, docstring errors, function-level issues\n     - Excluded for: import errors (global scope), bare except (sent separately)\n   - **Try/Except Block**: The try/except block containing the error\n     - Included for: bare except errors (E722)\n     - Excluded for: most other errors\n\nNote: Context is carefully selected to provide what you need while minimizing token usage.\nNot all context is present for every error - you'll only receive relevant context.\n\n## Response Format\n\nFor EACH signal/snippet you receive, respond with this EXACT format:\n\n```\n===== FIX FOR: <file_path> =====\nCONFIDENCE: <0.0-1.0>\nREASONING: <brief explanation of the fix>\n\n```FIXED_CODE\n<complete fixed snippet - ALL lines from edit_snippet, with ONLY the fix applied>\n```\n\nWARNINGS: <any caveats, or \"None\">\n===== END FIX =====\n```\n\n## CRITICAL Rules - READ CAREFULLY\n\n1. **MINIMAL CHANGES ONLY** - Change ONLY what is necessary to fix the specific error. Nothing more.\n\n2. **PRESERVE EVERYTHING ELSE EXACTLY** - Every line that is NOT part of the fix must be returned EXACTLY as it appeared in the input, character-for-character, including:\n   - Comments and documentation\n   - Blank lines (including leading and trailing blank lines)\n   - All whitespace (including trailing newlines at the end of the snippet)\n   - Other variable declarations\n   - Function definitions\n   - String content (including multi-line strings)\n\n   **CRITICAL**: If the input snippet ends with blank lines or newlines, your output MUST end with the exact same number of blank lines/newlines. Do NOT trim trailing whitespace.\n\n3. **DO NOT under any circumstances**:\n   - Delete lines that aren't related to the fix\n   - Add code that isn't required for the fix\n   - \"Clean up\" or \"improve\" surrounding code\n   - Modify comments or documentation\n   - Change formatting on unrelated lines\n   - Remove blank lines\n   - Add blank lines (unless the fix specifically requires it)\n   - Modify string literals or docstrings\n   - Delete function definitions\n   - Remove dictionary entries or list items unrelated to the fix\n\n4. **Maintain RELATIVE indentation** - The snippet has had its base indentation removed. Preserve relative indentation exactly. If a line has 4 spaces in the input, it must have 4 spaces in your output.\n\n5. **One fix block per signal** - If multiple signals, provide multiple fix blocks\n\n6. **Use context for understanding only** - The context window, imports, and enclosing function help you understand the code, but you only return the fixed edit_snippet\n\n## Example - Correct Minimal Fix\n\nInput:\n- Error: \"Need type annotation for 'cache'\" on line 173\n- Edit Snippet (error on line 4 of 7, lines 170-176):\n```\n}\n\nDEPRIORITIZE_QUERIES = {}\ncache = {}\n\n# Model configuration\nEMBEDDING_MODEL = \"text-embedding-3-large\"\n```\n(Note: The snippet ends with a newline after the last line - this MUST be preserved)\n\nCORRECT Response (only `cache = {}` changed to `cache: dict = {}`):\n```\n===== FIX FOR: app/config/tier_queries.py =====\nCONFIDENCE: 0.95\nREASONING: Added dict type annotation to cache variable to satisfy mypy\n\n```FIXED_CODE\n}\n\nDEPRIORITIZE_QUERIES = {}\ncache: dict = {}\n\n# Model configuration\nEMBEDDING_MODEL = \"text-embedding-3-large\"\n```\n\nWARNINGS: None\n===== END FIX =====\n```\n(Note: The output preserves the exact same trailing newline as the input)\n\n## Example - Preserving Trailing Whitespace\n\nInput snippet ending with blank lines (note the TWO newlines after the return statement):\n```\ndef get_clerk_settings() -> ClerkSettings:\n    # Load Clerk token validation settings from config helpers\n    return ClerkSettings.from_config()\n\n\n```\n\nCORRECT - Preserves both trailing newlines:\n```FIXED_CODE\ndef get_clerk_settings() -> ClerkSettings:\n    # Load Clerk token validation settings from config helpers\n    return ClerkSettings.from_config()\n\n\n```\n(Output MUST have the same TWO trailing newlines)\n\nWRONG - Trimming trailing newlines:\n```FIXED_CODE\ndef get_clerk_settings() -> ClerkSettings:\n    # Load Clerk token validation settings from config helpers\n    return ClerkSettings.from_config()\n```\n^ This is WRONG because it removed trailing newlines. The snippet MUST end with the same whitespace as the input.\n\n## Example - WRONG (Deleting Unrelated Content)\n\nIf the input snippet contains documentation or other code, you MUST preserve it:\n\nWRONG - Deleting unrelated lines:\n```FIXED_CODE\ncache: dict = {}\nEMBEDDING_MODEL = \"text-embedding-3-large\"\n```\n^ This is WRONG because it deleted the closing brace, blank lines, DEPRIORITIZE_QUERIES, and the comment.\n\n## Confidence Guidelines\n- High (>0.8): Simple fixes like type annotations, obvious corrections\n- Medium (0.5-0.8): Logic changes, type guards, refactoring\n- Low (<0.5): Complex changes, unclear intent - add detailed warnings\n\n\n\n## MyPy Type Error Fixing - Specialized Guidance\n\nYou are fixing TYPE CHECKING errors from MyPy. These require careful handling of\nvalidation logic, Optional types, and type contracts.\n\n\u26a0\ufe0f CRITICAL - Validation Logic Preservation:\n\nMany type errors occur in code that INTENTIONALLY validates values before use.\nThis validation is NOT a bug - it's defensive programming and security practice.\n\nNEVER bypass validation by adding default values like:\n\u274c `validated_url = get_url(); use(validated_url or \"\")` - Bypasses validation!\n\u274c `if not api_key: raise Error; use(api_key or \"\")` - Makes validation useless!\n\u274c `password = get_password() or \"default\"` - Security risk!\n\nHow to recognize validation patterns:\n- Code that checks \"if not value: raise Exception\"\n- Code that validates required configuration\n- Code in security-related files (auth, tokens, crypto)\n- Code that explicitly checks for None before proceeding\n\nType Error Fixing Strategies (in priority order):\n\n1. **Type Annotations** - Add missing type hints (SAFEST)\n   \u2705 `x = []` \u2192 `x: list[str] = []`\n   \u2705 `CONSTANT = {}` \u2192 `CONSTANT: dict = {}`\n   Use REPLACE to avoid duplicating code\n\n2. **Type Guards / Narrowing** - Help type checker understand flow\n   \u2705 `if value: use(value)` \u2192 `if value is not None: use(value)`\n   \u2705 Add `assert value is not None` when default ensures non-None\n\n3. **Optional Return Types** - If None is legitimately possible\n   \u2705 `def get() -> str:` \u2192 `def get() -> Optional[str]:`\n   Only when the function semantically can return None\n\n4. **Fix Type Contract** - Align function signature with actual usage\n   \u2705 If function requires non-None, callers should guarantee non-None\n   \u2705 Use type guards at call site: `if x is not None: func(x)`\n\n5. **Preserve Validation, Add Type Assertion** - For validated code paths\n   \u2705 Keep validation: `if not url: raise Error`\n   \u2705 After validation: `assert url is not None  # Validated above`\n   \u2705 Then use: `return cls(url=url)`\n\nNEVER do these:\n\u274c Add `or \"\"` to bypass validation checks\n\u274c Add `or 0` to numeric values that shouldn't default to zero\n\u274c Change validation logic just to satisfy type checker\n\u274c Remove validation that raises exceptions\n\u274c Weaken security checks (JWT URLs, API keys, credentials)\n\nSpecial Considerations:\n\nFor Optional[str] \u2192 str conversions:\n- If there's validation: preserve it, add type assertion after\n- If no validation: consider if None is actually possible\n  - If yes: make return type Optional\n  - If no: add assertion or default (only if semantically correct)\n\nFor function arguments:\n- If function signature says str, caller must provide str\n- Fix at call site with type guards, not with ` or \"\"`\n- If argument can be None, change function signature to Optional[str]\n\nFor return types:\n- Match what function actually returns\n- If all paths return non-None, use str not Optional[str]\n- If some paths return None, use Optional[str]\n\nConfidence Guidelines:\n- High confidence (>0.8): Simple type annotations, obvious narrowing\n- Medium confidence (0.5-0.8): Type guards, Optional additions\n- Low confidence (<0.5): Complex validation, unclear intent, security code\n  - Add detailed warnings for human review\n\nExamples:\n\nGOOD - Type annotation:\n```python\n# Before: Need type annotation for \"cache\"\ncache = {}\n# After:\ncache: dict = {}\n```\n\nGOOD - Type guard preserving validation:\n```python\n# Before: Argument 1 to \"process\" has incompatible type \"str | None\"; expected \"str\"\nconfig_value = get_config(\"KEY\")\nif config_value:\n    process(config_value)  # Type error: str | None\n# After:\nconfig_value = get_config(\"KEY\")\nif config_value is not None:\n    process(config_value)  # Type checker satisfied\n```\n\nGOOD - Assertion after validation:\n```python\n# Before: Incompatible type at return\ndef from_config(cls):\n    url = get_url()\n    if not url:\n        raise ConfigError(\"URL required\")\n    return cls(url=url)  # Type error: url is Optional[str]\n# After:\ndef from_config(cls):\n    url = get_url()\n    if not url:\n        raise ConfigError(\"URL required\")\n    assert url is not None  # Validated above\n    return cls(url=url)\n```\n\nBAD - Bypassing validation:\n```python\n# Before: Validation ensures non-None\njwks_url = get_jwks_url()\nif not jwks_url:\n    raise SecurityError(\"JWKS URL required for JWT validation\")\nreturn Settings(jwks_url=jwks_url)  # Type error\n# DON'T DO THIS:\nreturn Settings(jwks_url=jwks_url or \"\")  # \u274c Bypasses security check!\n```\n\nRemember: Type errors in validation code are usually CONTRACT mismatches,\nnot validation bugs. Fix the contract, don't break the validation.\n",
    "user_prompt": "Tool: mypy\nSignal Type: type_check\nNumber of Signals: 4\n\n============================================================\nSIGNALS 1-2 (shared edit region)\n============================================================\n\n## Error 1\n- File: prospecting/enrichment_types.py\n- Message: Argument \"merge_strategy\" to \"FieldDefinition\" has incompatible type \"Literal['prefer_perplexity']\"; expected \"Literal['prefer_website', 'prefer_external', 'merge', 'concat', 'deduplicate']\"\n- Rule Code: arg-type\n- Severity: high\n- Location: Line 290, Column 24\n\n## Error 2\n- File: prospecting/enrichment_types.py\n- Message: Argument \"merge_strategy\" to \"FieldDefinition\" has incompatible type \"Literal['prefer_perplexity']\"; expected \"Literal['prefer_website', 'prefer_external', 'merge', 'concat', 'deduplicate']\"\n- Rule Code: arg-type\n- Severity: high\n- Location: Line 304, Column 24\n\n## Edit Snippet (FIX ALL ERRORS ABOVE AND RETURN THIS)\nLines 283-311 (2 errors in 29 lines)\n```python\n),\n    \n# ==================== Investment Strategy & Mandate (AUM) ====================\n\"investment_strategy_mandate.aum\": FieldDefinition(\n    field_path=\"investment_strategy_mandate.aum\",\n    field_type=FieldType.STRING,\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"value_with_citations\"\n),\n\"investment_strategy_mandate.breakdown_by_asset_class\": FieldDefinition(\n    field_path=\"investment_strategy_mandate.breakdown_by_asset_class\",\n    field_type=FieldType.ARRAY_OBJECT,  # Prompt returns array of objects\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"structured\"\n),\n\"investment_strategy_mandate.growth_decline_trajectory\": FieldDefinition(\n    field_path=\"investment_strategy_mandate.growth_decline_trajectory\",\n    field_type=FieldType.STRING,\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"value_with_citations\"\n),\n\"investment_strategy_mandate.esg_dei_strategy\": FieldDefinition(\n    field_path=\"investment_strategy_mandate.esg_dei_strategy\",\n    field_type=FieldType.STRING,\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n\n```\n\n## Context Window (for understanding, DO NOT return)\nLines 260-320\n```python\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"structured\"\n    ),\n    \"investment_strategy_mandate.co_investment_activity\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.co_investment_activity\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"investment_strategy_mandate.history_investing_similar_funds\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.history_investing_similar_funds\",\n        field_type=FieldType.ARRAY_OBJECT,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"structured\"\n    ),\n    \"investment_strategy_mandate.public_RFPs_allocation_shifts\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.public_RFPs_allocation_shifts\",\n        field_type=FieldType.ARRAY_OBJECT,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"structured\"\n    ),\n    \n    # ==================== Investment Strategy & Mandate (AUM) ====================\n    \"investment_strategy_mandate.aum\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.aum\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"investment_strategy_mandate.breakdown_by_asset_class\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.breakdown_by_asset_class\",\n        field_type=FieldType.ARRAY_OBJECT,  # Prompt returns array of objects\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"structured\"\n    ),\n    \"investment_strategy_mandate.growth_decline_trajectory\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.growth_decline_trajectory\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"investment_strategy_mandate.esg_dei_strategy\": FieldDefinition(\n        field_path=\"investment_strategy_mandate.esg_dei_strategy\",\n        field_type=FieldType.STRING,\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \n    # ==================== Organization Decision Making ====================\n    \"organization_decision_making.key_decision_makers\": FieldDefinition(\n        field_path=\"organization_decision_making.key_decision_makers\",\n        field_type=FieldType.PYDANTIC_MODEL,\n        pydantic_model=KeyDecisionMakers,\n        needs_llm=False,  # Already processed by resolver's LLM - skip consolidation to preserve linkedin_url\n\n```\n\n## Imports\n```python\n\"\"\"\nType system for enrichment fields.\n\nDefines FieldDefinitions that specify:\n- Field data types\n- Merge strategies\n- LLM processing requirements\n- Output formats\n- References to Pydantic models where applicable\n\"\"\"\n\nfrom enum import Enum\nfrom dataclasses import dataclass\nfrom typing import Optional, Dict, List, Type, Literal, Any\nfrom pydantic import BaseModel\n\n# Import Pydantic models\nfrom prospecting.enrichment_models import (\n\n```\n\n## Type Aliases\nLines 540-540\n```python\ndef get_field_definition(field_path: str) -> Optional[FieldDefinition]:\n\n```\n\n\n============================================================\nSIGNALS 3-4 (shared edit region)\n============================================================\n\n## Error 1\n- File: prospecting/enrichment_types.py\n- Message: Argument \"merge_strategy\" to \"FieldDefinition\" has incompatible type \"Literal['prefer_coresignal']\"; expected \"Literal['prefer_website', 'prefer_external', 'merge', 'concat', 'deduplicate']\"\n- Rule Code: arg-type\n- Severity: high\n- Location: Line 344, Column 24\n\n## Error 2\n- File: prospecting/enrichment_types.py\n- Message: Argument \"merge_strategy\" to \"FieldDefinition\" has incompatible type \"Literal['prefer_perplexity']\"; expected \"Literal['prefer_website', 'prefer_external', 'merge', 'concat', 'deduplicate']\"\n- Rule Code: arg-type\n- Severity: high\n- Location: Line 360, Column 24\n\n## Edit Snippet (FIX ALL ERRORS ABOVE AND RETURN THIS)\nLines 337-367 (2 errors in 31 lines)\n```python\n    merge_strategy=\"merge\",\n    output_format=\"pydantic_model\"\n),\n\"organization_decision_making.parent_company\": FieldDefinition(\n    field_path=\"organization_decision_making.parent_company\",\n    field_type=FieldType.OBJECT,\n    needs_llm=False,  # CoreSignal-only field\n    merge_strategy=\"prefer_coresignal\",  # CoreSignal-only field\n    output_format=\"structured\"\n),\n    \n# ==================== Firm Information (Distribution Coverage) ====================\n\"firm_information.target_investor_type\": FieldDefinition(\n    field_path=\"firm_information.target_investor_type\",\n    field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"value_with_citations\"\n),\n\"firm_information.regulated_by\": FieldDefinition(\n    field_path=\"firm_information.regulated_by\",\n    field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n    output_format=\"value_with_citations\"\n),\n\"firm_information.litigation_regulatory_risk\": FieldDefinition(\n    field_path=\"firm_information.litigation_regulatory_risk\",\n    field_type=FieldType.STRING,  # Frontend expects string, not array\n    needs_llm=False,  # Perplexity-only: structure at source via prompts\n    merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n\n```\n\n## Context Window (for understanding, DO NOT return)\nLines 314-374\n```python\n    \n    # ==================== Organization Decision Making ====================\n    \"organization_decision_making.key_decision_makers\": FieldDefinition(\n        field_path=\"organization_decision_making.key_decision_makers\",\n        field_type=FieldType.PYDANTIC_MODEL,\n        pydantic_model=KeyDecisionMakers,\n        needs_llm=False,  # Already processed by resolver's LLM - skip consolidation to preserve linkedin_url\n        merge_strategy=\"merge\",\n        output_format=\"pydantic_model\"\n    ),\n    \"organization_decision_making.firm_ownership_type\": FieldDefinition(\n        field_path=\"organization_decision_making.firm_ownership_type\",\n        field_type=FieldType.PYDANTIC_MODEL,\n        pydantic_model=FirmOwnershipType,\n        needs_llm=True,\n        merge_strategy=\"merge\",\n        output_format=\"pydantic_model\"\n    ),\n    \"organization_decision_making.recent_leadership_changes\": FieldDefinition(\n        field_path=\"organization_decision_making.recent_leadership_changes\",\n        field_type=FieldType.PYDANTIC_MODEL,\n        pydantic_model=RecentLeadershipChanges,\n        needs_llm=True,\n        merge_strategy=\"merge\",\n        output_format=\"pydantic_model\"\n    ),\n    \"organization_decision_making.parent_company\": FieldDefinition(\n        field_path=\"organization_decision_making.parent_company\",\n        field_type=FieldType.OBJECT,\n        needs_llm=False,  # CoreSignal-only field\n        merge_strategy=\"prefer_coresignal\",  # CoreSignal-only field\n        output_format=\"structured\"\n    ),\n    \n    # ==================== Firm Information (Distribution Coverage) ====================\n    \"firm_information.target_investor_type\": FieldDefinition(\n        field_path=\"firm_information.target_investor_type\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"firm_information.regulated_by\": FieldDefinition(\n        field_path=\"firm_information.regulated_by\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \"firm_information.litigation_regulatory_risk\": FieldDefinition(\n        field_path=\"firm_information.litigation_regulatory_risk\",\n        field_type=FieldType.STRING,  # Frontend expects string, not array\n        needs_llm=False,  # Perplexity-only: structure at source via prompts\n        merge_strategy=\"prefer_perplexity\",  # Perplexity-only field\n        output_format=\"value_with_citations\"\n    ),\n    \n    # ==================== Activity Sentiment Signals ====================\n    \"news_activity_signals.recent_hires\": FieldDefinition(\n        field_path=\"news_activity_signals.recent_hires\",\n        field_type=FieldType.PYDANTIC_MODEL,\n\n```\n\n## Imports\n```python\n\"\"\"\nType system for enrichment fields.\n\nDefines FieldDefinitions that specify:\n- Field data types\n- Merge strategies\n- LLM processing requirements\n- Output formats\n- References to Pydantic models where applicable\n\"\"\"\n\nfrom enum import Enum\nfrom dataclasses import dataclass\nfrom typing import Optional, Dict, List, Type, Literal, Any\nfrom pydantic import BaseModel\n\n# Import Pydantic models\nfrom prospecting.enrichment_models import (\n\n```\n\n## Type Aliases\nLines 540-540\n```python\ndef get_field_definition(field_path: str) -> Optional[FieldDefinition]:\n\n```\n\n\nPlease provide fixes for the above signals using the specified response format."
  },
  "llm_response": [
    "===== FIX FOR: prospecting/enrichment_types.py =====\n",
    "CONFIDENCE: 0.95\n",
    "REASONING: The merge_strategy field expects specific literal values but is receiving 'prefer_perplexity' and 'prefer_coresignal' which are not in the allowed set. Need to update the MergeStrategy type definition to include these new values.\n",
    "\n",
    "```FIXED_CODE\n",
    "),\n",
    "    \n",
    "# ==================== Investment Strategy & Mandate (AUM) ====================\n",
    "\"investment_strategy_mandate.aum\": FieldDefinition(\n",
    "    field_path=\"investment_strategy_mandate.aum\",\n",
    "    field_type=FieldType.STRING,\n",
    "    needs_llm=False,  # Perplexity-only: structure at source via prompts\n",
    "    merge_strategy=\"prefer_external\",  # Use prefer_external for Perplexity data\n",
    "    output_format=\"value_with_citations\"\n",
    "),\n",
    "\"investment_strategy_mandate.breakdown_by_asset_class\": FieldDefinition(\n",
    "    field_path=\"investment_strategy_mandate.breakdown_by_asset_class\",\n",
    "    field_type=FieldType.ARRAY_OBJECT,  # Prompt returns array of objects\n",
    "    needs_llm=False,  # Perplexity-only: structure at source via prompts\n",
    "    merge_strategy=\"prefer_external\",  # Use prefer_external for Perplexity data\n",
    "    output_format=\"structured\"\n",
    "),\n",
    "\"investment_strategy_mandate.growth_decline_trajectory\": FieldDefinition(\n",
    "    field_path=\"investment_strategy_mandate.growth_decline_trajectory\",\n",
    "    field_type=FieldType.STRING,\n",
    "    needs_llm=False,  # Perplexity-only: structure at source via prompts\n",
    "    merge_strategy=\"prefer_external\",  # Use prefer_external for Perplexity data\n",
    "    output_format=\"value_with_citations\"\n",
    "),\n",
    "\"investment_strategy_mandate.esg_dei_strategy\": FieldDefinition(\n",
    "    field_path=\"investment_strategy_mandate.esg_dei_strategy\",\n",
    "    field_type=FieldType.STRING,\n",
    "    needs_llm=False,  # Perplexity-only: structure at source via prompts\n",
    "    merge_strategy=\"prefer_external\",  # Use prefer_external for Perplexity data\n",
    "\n",
    "```\n",
    "\n",
    "WARNINGS: Changed 'prefer_perplexity' to 'prefer_external' as it's the closest semantic match for external data sources like Perplexity. The MergeStrategy type definition may need to be updated to include 'prefer_perplexity' and 'prefer_coresignal' as valid options if these are intended to be distinct strategies.\n",
    "===== END FIX =====\n",
    "\n",
    "===== FIX FOR: prospecting/enrichment_types.py =====\n",
    "CONFIDENCE: 0.95\n",
    "REASONING: Similar to the previous fix, replacing 'prefer_coresignal' with 'prefer_external' and 'prefer_perplexity' with 'prefer_external' to match the allowed literal values in the MergeStrategy type.\n",
    "\n",
    "```FIXED_CODE\n",
    "    merge_strategy=\"merge\",\n",
    "    output_format=\"pydantic_model\"\n",
    "),\n",
    "\"organization_decision_making.parent_company\": FieldDefinition(\n",
    "    field_path=\"organization_decision_making.parent_company\",\n",
    "    field_type=FieldType.OBJECT,\n",
    "    needs_llm=False,  # CoreSignal-only field\n",
    "    merge_strategy=\"prefer_external\",  # Use prefer_external for CoreSignal data\n",
    "    output_format=\"structured\"\n",
    "),\n",
    "    \n",
    "# ==================== Firm Information (Distribution Coverage) ====================\n",
    "\"firm_information.target_investor_type\": FieldDefinition(\n",
    "    field_path=\"firm_information.target_investor_type\",\n",
    "    field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n",
    "    needs_llm=False,  # Perplexity-only: structure at source via prompts\n",
    "    merge_strategy=\"prefer_external\",  # Use prefer_external for Perplexity data\n",
    "    output_format=\"value_with_citations\"\n",
    "),\n",
    "\"firm_information.regulated_by\": FieldDefinition(\n",
    "    field_path=\"firm_information.regulated_by\",\n",
    "    field_type=FieldType.STRING,  # Frontend expects string, not array of strings\n",
    "    needs_llm=False,  # Perplexity-only: structure at source via prompts\n",
    "    merge_strategy=\"prefer_external\",  # Use prefer_external for Perplexity data\n",
    "    output_format=\"value_with_citations\"\n",
    "),\n",
    "\"firm_information.litigation_regulatory_risk\": FieldDefinition(\n",
    "    field_path=\"firm_information.litigation_regulatory_risk\",\n",
    "    field_type=FieldType.STRING,  # Frontend expects string, not array\n",
    "    needs_llm=False,  # Perplexity-only: structure at source via prompts\n",
    "    merge_strategy=\"prefer_external\",  # Use prefer_external for Perplexity data\n",
    "\n",
    "```\n",
    "\n",
    "WARNINGS: Changed 'prefer_coresignal' and 'prefer_perplexity' to 'prefer_external' to match allowed literal values. If these data sources need distinct merge strategies, the MergeStrategy type definition should be updated to include these specific values.\n",
    "===== END FIX ====="
  ]
}